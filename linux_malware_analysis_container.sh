#!/bin/bash

# Check if a file name was provided
if [ -z "$1" ]
then
  echo "Please provide a file name as a command line argument."
  exit 1
fi

image_name="linux-malware-analysis"

# Generate a unique container name
container_name="${image_name}_$(date +%s)"

# Build and run interactively
docker build --build-arg FILE_NAME=$1 -t $image_name .
docker run -it --name $container_name $image_name

# After the Docker container has finished running, kill and it
docker kill $container_name
docker rm $container_name